<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>createImageData</title>
    </head>
    <body>
        <canvas id="canvas" width="800" height="800"></canvas>
    </body>
</html>

<script type="text/javascript">
    var ctx;
    window.onload = function() {
        ctx = document.getElementById('canvas').getContext('2d');
        setCreateImageData();
    }

    function setCreateImageData() {
        var img = ctx.createImageData(800, 800);
        for (var i = 0; i < img.data.length; i += 4) {
            var flag = false;((parseInt(i / 3200 % 10) == 0));
            img.data[i] = flag ? 255 : getRandom();
            img.data[i + 1] = flag ? 0 : getRandom();
            img.data[i + 2] = flag ? 0 : getRandom();
            img.data[i + 3] = flag ? 1 : 255;
        }
        ctx.putImageData(img, 20, 20)
    }

    function getRandom() {
        return parseInt(Math.random() * 256);
    }
</script>
