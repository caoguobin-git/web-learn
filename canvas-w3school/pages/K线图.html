<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>K线图</title>
        <script src="../js/vue.js"></script>
    </head>
    <body>
        <div id="demo">
            <canvas id="canvas" width="1000" height="500"></canvas>
        </div>
    </body>
</html>
<script type="text/javascript">
    var ctx;
    var center = 10;
    var demo = new Vue({
        el: '#demo',
        data: {
            datas: [
                "2019-06-24,53.80,54.35,54.87,53.30,502353,2731804704,2.95%",
                "2019-06-25,54.35,54.10,54.66,53.19,416151,2244694464,2.7%",
                "2019-06-26,53.56,54.47,54.60,53.53,307171,1668305216,1.98%",
                "2019-06-27,54.70,54.99,55.50,54.50,414585,2283645216,1.84%",
                "2019-06-28,55.15,55.00,55.36,54.32,269378,1481403136,1.89%",
                "2019-07-01,56.24,58.59,59.00,56.18,878955,5087684608,5.13%",
                "2019-07-02,58.33,58.57,58.95,58.21,440289,2581076976,1.26%",
                "2019-07-03,58.28,57.33,58.50,56.90,408911,2357767744,2.73%",
                "2019-07-04,57.60,56.88,58.16,56.43,373649,2138683984,3.02%",
                "2019-07-05,57.08,58.10,58.18,56.75,306279,1768695792,2.51%",
                "2019-07-08,57.70,56.48,57.74,55.89,405250,2294026384,3.18%",
                "2019-07-09,56.49,55.99,56.88,55.51,244967,1373450592,2.43%",
                "2019-07-10,56.54,56.29,56.66,55.76,247566,1392394848,1.61%",
                "2019-07-11,56.83,56.00,57.57,55.75,409245,2314552496,3.23%",
                "2019-07-12,56.00,56.48,56.87,55.58,294308,1656330896,2.3%",
                "2019-07-15,55.89,55.88,56.60,54.60,430977,2392105120,3.54%",
                "2019-07-16,56.00,54.81,56.09,54.64,376209,2071224256,2.59%",
                "2019-07-17,54.72,54.53,54.79,54.10,281459,1532366880,1.26%",
                "2019-07-18,54.49,54.40,54.50,53.70,283549,1532376592,1.47%",
                "2019-07-19,54.70,54.20,54.79,54.02,377030,2046724240,1.42%",
                "2019-07-22,54.20,54.00,54.50,53.53,213064,1151569024,1.79%",
                "2019-07-23,54.01,54.40,54.40,53.81,229057,1240636896,1.09%",
                "2019-07-24,54.68,54.76,55.55,54.56,355886,1959561568,1.82%",
                "2019-07-25,54.76,55.12,55.35,54.41,225677,1239775440,1.72%",
                "2019-07-26,54.71,55.46,55.56,54.67,254616,1409163456,1.61%",
                "2019-07-29,55.45,54.62,55.68,54.20,359377,1967681952,2.67%",
                "2019-07-30,54.64,55.08,55.30,54.40,273303,1504014080,1.65%",
                "2019-07-31,55.31,55.09,55.89,54.90,287263,1587851072,1.8%",
                "2019-08-01,55.00,53.68,55.00,53.38,482957,2603710656,2.94%",
                "2019-08-02,52.00,53.43,53.63,51.31,411600,2163381808,4.32%",
                "2019-08-05,53.40,52.98,53.80,52.66,394929,2095253152,2.13%",
                "2019-08-06,50.60,50.93,51.30,49.05,532003,2673208384,4.25%",
                "2019-08-07,51.10,50.27,51.45,50.26,242403,1229731984,2.34%",
                "2019-08-08,50.50,51.00,51.44,50.42,296271,1508171152,2.03%",
                "2019-08-09,51.03,49.94,51.29,49.68,391730,1966289440,3.16%",
                "2019-08-12,49.80,50.38,50.49,49.60,235655,1181813536,1.78%",
                "2019-08-13,50.65,51.36,52.30,50.65,499000,2576555712,3.28%",
                "2019-08-14,52.73,51.56,53.00,51.50,323716,1688194976,2.92%",
                "2019-08-15,50.56,51.30,51.35,50.16,226727,1153442544,2.31%",
                "2019-08-16,51.20,51.25,51.68,50.60,289949,1485214224,2.11%",
                "2019-08-19,51.80,52.42,52.50,51.55,344398,1795197520,1.85%",
                "2019-08-20,52.40,52.79,53.09,52.02,317058,1669667776,2.04%",
                "2019-08-21,52.60,54.54,55.20,52.58,664285,3600329680,4.96%",
                "2019-08-22,54.99,54.88,55.45,54.51,368523,2026121136,1.72%",
                "2019-08-23,55.10,54.89,55.39,54.51,325910,1790338560,1.6%",
                "2019-08-26,53.46,54.17,54.48,53.26,338864,1831120192,2.22%",
                "2019-08-27,54.41,55.35,55.99,54.41,472373,2622023776,2.92%",
                "2019-08-28,55.78,55.32,55.79,55.01,243396,1347449568,1.41%",
                "2019-08-29,55.50,54.78,55.74,54.02,302431,1652930096,3.11%",
                "2019-08-30,55.32,55.50,55.95,55.02,410238,2279607696,1.7%",
                "2019-09-02,56.95,57.47,57.82,56.70,684289,3926350832,2.02%",
                "2019-09-03,58.41,57.80,58.43,57.10,511978,2960811296,2.31%",
                "2019-09-04,57.79,59.85,59.85,57.30,644381,3817675952,4.41%",
                "2019-09-05,59.91,58.87,60.56,58.81,483041,2876712464,2.92%",
                "2019-09-06,59.20,58.80,59.20,58.00,385050,2255748896,2.04%"
            ]
        },
        mounted: function() {
            ctx = document.getElementById('canvas').getContext('2d');
            this.datas.forEach(k => {
                var d = k.split(',');
                var open = d[1];
                var close = d[2];
                var high = d[3];
                var low = d[4];
                console.log(open, close, high, low);
                if (close > open) {
                    ctx.fillStyle = 'red';
                } else {
                    ctx.fillStyle = 'green';
                }

                //绘制高低点
                var y = (66 - high) * 20;
                console.log(y)
                ctx.fillRect(center + 0.5, y, 1, (high - low) * 20)
                //绘制开关市
                if (close > open) {
                    ctx.strokeStyle = 'red';
                } else {
                    ctx.strokeStyle = 'green';
                }
                y = (66 - (open > close ? open : close)) * 20;
                console.log(y)
                ctx.fillRect(center + 0.5 - 2, y, 5, Math.abs(open - close) * 20)

                center += 11;
            })
        }
    })
</script>
