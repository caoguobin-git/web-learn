<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>图像-绘制视频</title>
        <style type="text/css">
            canvas{
                border: 1px solid black;
            }
            video{
                margin-left: 150px;
                width: 200px;
                /* border: 5px solid black; */
                border-radius: 20px;
                outline: none;
            }
        </style>
    </head>
    <body>
        <canvas id="canvas" width="400" height="200"></canvas>
        <br>
        <video id="video" loop='loop' src="../img/mov_bbb.mp4" controls="controls" width="200px"></video>
    </body>
</html>

<script type="text/javascript">
    var ctx;
    window.onload = function() {
        ctx = document.getElementById('canvas').getContext('2d');
        setDrawVideo();

    }

    function setDrawVideo() {
        var video = document.getElementById('video');
        var v = document.getElementById('video');
        var i;
        v.addEventListener('play', function() {
            i = setInterval(function() {
                ctx.clearRect(0,0,800,800)
                ctx.drawImage(video, 150, 75,200,100);
                ctx.font = '20px Georgia';
                ctx.textAlign='left';
                ctx.fillText(new Date().getTime(),0,20,);
                console.log('drawing');
            }, 40);
        });

        v.addEventListener('pause', function() {
            clearInterval(i);
            console.log('暂停');
        });

        v.addEventListener('ended', function() {
            clearInterval(i);
            console.log('停止');
        })
    }
</script>
